1. ** A partir d'une CTI.**

    # Le fomrulaire

- Nous travaillons à partir de l'entité fleur,  elle est la cible inverse de la relation MTM avec Légume. Et parce qu'elle hérites de végétal, elle est la cible inverse de la relation MTM avec Jardinnier, et propriétaire de la relation MTO/OTM avec Mangeur.

- Nous construisons le formulaire grace à make:form
Puisque nous avons trois champs qui correspondent à des entités, nous utilisons le champ EntityType. Sans oublier les attributs expanded et multiple pour les MTM.

>   'expanded'  => false,
>   
>   'multiple'  => true,


- Puisque nous persistons les données à partir de l'entitée inverse, nous ajoutons:

> 'by_reference' => false,

    # La validation 

pour ce nous utilisons le Validator de symfony et nous plaçons les contraintes sur les proriétées de la classe Fleur et aussi de la classe Vegetal, exemple:

>    /**
>    
>     *@ORM\Column(type="string", length=255, nullable=true)
>     
>     *@Assert\NotBlank(message="Oups tu as ounlié le bouquet!")
>     
>     */
>    private $bouquet;

** CCL Le test est parfaitement réussi ! Lorsque nous soumettons le formulaire sans entrer de données, les messages d'erreurs des contraintes sur les entité de la STI s'affichent. Et lorsque nous soumettons des données valides celles sont parfaitement persistées en base de donnée !